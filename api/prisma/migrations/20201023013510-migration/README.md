# Migration `20201023013510-migration`

This migration has been generated by Russell at 10/22/2020, 9:35:10 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "User" ADD COLUMN     "authId" TEXT;
ALTER TABLE "User" ADD COLUMN     "customerId" TEXT

CREATE UNIQUE INDEX "User.authId_unique" ON "User"("authId")

CREATE UNIQUE INDEX "User.customerId_unique" ON "User"("customerId")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201020224052-init..20201023013510-migration
--- datamodel.dml
+++ datamodel.dml
@@ -1,35 +1,32 @@
-datasource DS {
-  // optionally set multiple providers
-  // example: provider = ["sqlite", "postgresql"]
-  provider = "sqlite"
-  url = "***"
-}
-
 generator client {
   provider      = "prisma-client-js"
-  binaryTargets = "native"
+  binaryTargets = ["native"]
 }
-// Define your own datamodels here and run `yarn redwood db save` to create
-// migrations for them.
+datasource DS {
+  provider = "sqlite"
+  url = "***"
+}
 model User {
-  id       Int        @id @default(autoincrement())
-  email    String     @unique
-  name     String?
-  Donation Donation[]
+  id         Int        @id @default(autoincrement())
+  authId     String?    @unique
+  customerId String?    @unique
+  email      String     @unique
+  name       String?
+  Donation   Donation[]
 }
 model Donation {
   id            Int      @id @default(autoincrement())
   amount        Int
   donationTime  DateTime @default(now())
   transactionId Int
-  donor         User     @relation(fields: [userId], references: [id])
-  recipient     Project  @relation(fields: [projectId], references: [id])
   userId        Int
   projectId     Int
+  recipient     Project  @relation(fields: [projectId], references: [id])
+  donor         User     @relation(fields: [userId], references: [id])
 }
 model Project {
   id               Int        @id @default(autoincrement())
@@ -40,8 +37,8 @@
   longDescription  String
   coverImage       String
   stripeId         String
   goalAmount       Int
-  donations        Donation[]
   videoLink        String
   websiteLink      String
+  donations        Donation[]
 }
```


